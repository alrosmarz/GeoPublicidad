<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->
<head>
    <meta charset="ISO-8859-1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <title>Registrate!</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="robots" content="index,follow" />
    <!--<link rel="shortcut icon" href="images/favicon.ico" />-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" rel="Stylesheet" />
    <script src="js/msdropdown/jquery.dd.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/msdropdown/dd.css" />
    <script src="js/jquery.waitingpopup.js" type="text/javascript"></script>
    <link href="styles/jquery-ui-1.8.7.custom.css" rel="stylesheet" type="text/css" />
    <link href="styles/jquery.waitingpopup.css" rel="stylesheet" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Jura' rel='stylesheet' type='text/css' />

    <script src="script.js" type="text/javascript"></script>
    <link href="style.css" rel="stylesheet" type="text/css" />

    <style type="text/css">
        
        .error
        {
            display:none;
            font-weight: bold;
			color: red;
			padding: 2px 8px;
			margin-top: 2px;
        }
        input, textarea {
	        border:1px solid #cccccc;
	        padding:7px 10px 7px 10px;
	        font-size:14px;
	        color:#000000;
	        -webkit-border-radius:3px;
	        -moz-border-radius:3px;
	        border-radius:3px;
	        font-family: 'Jura', Helvetica, Arial, Tahoma, sans-serif;
        }
        
        h1, h2, h3, h4, h5, h6 {
	        font-family: 'Jura', Helvetica, Arial, Tahoma, sans-serif;
	        margin-bottom:12px;
	        font-weight:600;
        }
        
        /* ================= 1. CSS Reset ================= */
        html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, caption {
	        margin:0;
	        padding:0;
	        border:0;
	        outline:0;
	        font-family: 'Jura', Helvetica, Arial, Tahoma, sans-serif;
        }

        .button {
	        display: inline-block;
	        outline: none;
	        cursor: pointer;
	        text-align: center;
	        text-decoration: none;
	        font: 14px/100% Arial, Helvetica, sans-serif;
	        padding: .5em 2em .55em;
	        text-shadow: 0 1px 1px rgba(0,0,0,.3);
	        -webkit-border-radius: .5em; 
	        -moz-border-radius: .5em;
	        border-radius: .5em;
	        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.2);
	        -moz-box-shadow: 0 1px 2px rgba(0,0,0,.2);
	        box-shadow: 0 1px 2px rgba(0,0,0,.2);
        }
        .button:hover {
	        text-decoration: none;
        }
        .button:active {
	        position: relative;
	        top: 1px;
        }
        
        .orange {
	        color: #fef4e9;
	        border: solid 1px #da7c0c;
	        background: #f78d1d;
	        background: -webkit-gradient(linear, left top, left bottom, from(#faa51a), to(#f47a20));
	        background: -moz-linear-gradient(top,  #faa51a,  #f47a20);
	        filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#faa51a', endColorstr='#f47a20');
        }
        .orange:hover {
	        background: #f47c20;
	        background: -webkit-gradient(linear, left top, left bottom, from(#f88e11), to(#f06015));
	        background: -moz-linear-gradient(top,  #f88e11,  #f06015);
	        filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#f88e11', endColorstr='#f06015');
        }
        .orange:active {
	        color: #fcd3a5;
	        background: -webkit-gradient(linear, left top, left bottom, from(#f47a20), to(#faa51a));
	        background: -moz-linear-gradient(top,  #f47a20,  #faa51a);
	        filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#f47a20', endColorstr='#faa51a');
        }

         .modal {
            background-color:#fff;
            display:none;
            width:350px;
            padding:15px;
            text-align:left;
            border:2px solid #333;
            opacity:0.8;
            -moz-border-radius:6px;
            -webkit-border-radius:6px;
            -moz-box-shadow: 0 0 50px #ccc;
            -webkit-box-shadow: 0 0 50px #ccc;
          }
 
          .modal h2 {
            background-color:Gray;
            margin:0px;
            padding:10px 0 10px 45px;
            border-bottom:1px solid #333;
            font-size:20px;
          }
  
    </style>

    <script type="text/javascript">

        $(document).ready(function () {

            $('#form').validations();

            try {
                $("body select").msDropDown();
            } catch (e) {
                alert(e.message);
            }

            $(".slideOption1").hide();
            $(".slideOption2").hide();
            $(".slideOption3").hide();
            $(".slideFormaPago").hide();
            $(".slideGracias").hide();
            $("#txtOtra").hide();
            $("#lnkPaypal").show();

            $("#lnkPaypal").click(Actualizar);
            $("#lnkConfirmar").click(Actualizar);

            $('#ddlHow').change(function () {
                $("#txtOtra").hide()
                if ($('#ddlHow').val() == "10")
                    $("#txtOtra").show();
            });

            $('#ddlFormaPago').change(function () {

                if ($('#ddlFormaPago').val() == "1") {
                    $('#lnkConfirmar').hide();
                    $('#lnkPaypal').show();
                }
                else {
                    $('#lnkConfirmar').show();
                    $('#lnkPaypal').hide();

                }
            });

            $('#registro').click(function () {


                if (!$("#chkTerminos").is(':checked')) {
                    alert('Para continuar tienes que aceptar los términos y condiciones.');
                    return;
                }

                $(".slideForm").hide();
                $(".slideFormaPago").hide();
                $(".slideOption1").slideToggle();

                $('#divComprar').append("<a href=\"#pago\" id=\"comprar\" ><img src=\"imagenes/boton_pagar.png\" /></a>");
                $('#divComprar').append("<a href=\"#pago\" id=\"apartar\" ><img src=\"imagenes/boton_apartar.png\" /></a>");
                var target_offset = $("#pago").offset();

                $('#comprar').click(function () {
                    $(".slideForm").hide();
                    $(".slideOption1").hide();
                    $(".slideFormaPago").slideToggle();

                    var target_offset = $("#pago").offset();

                    $('#tiporegistro').val("1");
                });

                $('#apartar').click(function () {

                    $(".slideForm").hide();
                    $(".slideOption1").hide();
                    $(".slideFormaPago").slideToggle();

                    var target_offset = $("#pago").offset();

                    $('#tiporegistro').val("2");
                });

                Guardar();

            });

            function Actualizar() {

                $().waitingpopup();
                $().waitingpopup('open');

                $.ajax({
                    url: "http://demows.cgpreceptor.com/GPService.asmx/actualizarRegistro",
                    //                 url: "http://localhost:7924/GPService.asmx/actualizarRegistro",
                    data: "idRegistro=" + idRegistro.value + "&formapago=" + ddlFormaPago.value + "&totalAPagar=0&apartado=" + tiporegistro.value
                    + "&montoApartado=0",
                    dataType: "jsonp",
                    async: false,
                    crossDomain: true,
                    success: function (response) {
                        $().waitingpopup('close');
                        $.each(response, function (index, p) {

                            $(".slideFormaPago").hide();
                            $(".slideGracias").slideToggle();

                            window.top.location.replace(p.Descripcion);

                            //if (p.Id == "paypal") {
                            //window.open(p.Descripcion, '_blank');
                            //  window.top.location.replace(p.Descripcion);
                            //}
                            //else {
                            //window.open(p.Descripcion, '_blank');
                            //  window.top.location.replace(p.Descripcion);
                            //}

                        });

                    },
                    error: function (msg) {
                        alert('Ocurrio un error, contacta al administrador.');
                        $().waitingpopup('close');

                    },
                    failure: function (msg) {
                        alert('Ocurrio un error, contacta al administrador.');
                        $().waitingpopup('close');
                    }
                });

            }

            function Guardar() {

                $().waitingpopup();
                $().waitingpopup('open');

                $.ajax({
                    url: "http://demows.cgpreceptor.com/GPService.asmx/insertaRegistro",
                    //                 url: "http://localhost:7924/GPService.asmx/insertaRegistro",
                    data: "nombre=" + txtNombre.value + "&apellidos=" + txtApellidos.value + "&company=" + txtCompany.value + "&direccion=" + txtDireccion.value
                    + "&ciudad=" + txtCiudad.value + "&telefono=" + txtTelefono.value + "&mail=" + txtMail.value + "&pais=" + ddlPais.value
                    + "&how=" + ddlHow.value + "&formapago=" + ddlFormaPago.value + "&idcurso=" + ddlCursos.value + "&tiporeg=" + tiporegistro.value + "&monto=0"
                    + "&totalpagar=0" + "&otrohow=" + txtOtra.value,
                    dataType: "jsonp",
                    async: false,
                    crossDomain: true,
                    success: function (response) {

                        $.each(response, function (index, p) {

                            $('#idRegistro').val(p.Id);

                        });

                        $().waitingpopup('close');
                    },
                    error: function (msg) {
                        $().waitingpopup('close');
                        console.log('someerror');
                    },
                    failure: function (msg) {
                        $().waitingpopup('close');
                        alert(msg);
                    }
                });
            }

            function ObtenerPaises() {

                $().waitingpopup();
                $().waitingpopup('open');

                $.ajax({
                    url: "http://demows.cgpreceptor.com/GPService.asmx/ObtienePaises",
                    dataType: "jsonp",
                    async: true,
                    crossDomain: true,
                    success: function (response) {

                        var oDD = $('#ddlPais').msDropDown().data("dd");
                        oDD.add({ text: '[Selecciona un país]', value: '0', selected: 'selected' });

                        $.each(response, function (index, p) {
                            oDD.add({ text: p.Descripcion, value: p.IdPais });
                        });

                        $('#ddlPais').msDropDown().data('dd').set('selectedIndex', 0);

                        $().waitingpopup('close');

                    },
                    error: function (msg) {
                        $().waitingpopup('close');
                        console.log('someerror');
                    },
                    failure: function (msg) {
                        $().waitingpopup('close');
                        alert(msg);
                    }
                });



            }

            function ObtieneCursos() {

                $.ajax({
                    url: "http://demows.cgpreceptor.com/GPService.asmx/ObtieneCursos",
                    dataType: "jsonp",
                    async: true,
                    crossDomain: true,
                    success: function (response) {

                        var oDD = $('#ddlCursos').msDropDown().data("dd");
                        oDD.add({ text: '[Selecciona un curso]', value: '0' });

                        $.each(response, function (index, p) {
                            var num = parseFloat(p.Costo);
                            oDD.add({ text: p.Descripcion + ' $' + num.toFixed(2), value: p.IdCursoConnect });
                        });

                        $('#ddlCursos').msDropDown().data('dd').set('selectedIndex', 0);

                    },
                    error: function (msg) {
                        console.log('someerror');
                    },
                    failure: function (msg) {
                        alert(msg);
                    }

                });

            }

            function dummyData() {
                $('#txtNombre').val("alejandro");
                $('#txtApellidos').val("rosales");
                $('#txtMail').val("arosales@dotnet.com.mx");
                $('#txtCompany').val("come company");
                $('#txtDireccion').val("some address");
                $('#txtTelefono').val("99999999");
                $('#txtCiudad').val("ciudad");
            }

            ObtenerPaises();
            ObtieneCursos();
            dummyData();

        });

</script>
</head>
<body>  
    <div id="form">                
        <table rules="none" border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color:transparent;margin-right:20px">
            <tr>
                <td>
                   <div class="slideForm" id="slideForm" style="display: block;">
                        <table id="tablaRegistro" border="0" cellpadding="0" cellspacing="0">	
                            <tr>
	                            <td colspan="4">
		                            <img src="imagenes/registro_03.png" width="977" height="218" alt="" /></td>
                            </tr>
                            <tr> 
	                            <td colspan="3" style="background-image:url(imagenes/registro_05.png);width:976px;height:542px;">
                                    <table>
                                          <tr>
                                                <td align="left" style="width:270px;" >
                                                    Nombre:
                                                </td>
                                                <td align="left" style="width:200px;" >
                                                    <input data-validate-presence="true" data-validate-error="#validation1" type="text" name="txtNombre" id="txtNombre" 
                                                    class="input-xlarge" >
                                                </td>
                                                <td align="left">
                                                    <div class="error" id="validation1">Campo requerido.</div>
                                                </td>
                                          </tr>
                                         <tr> 
                                             <td align="left">
                                            Apellidos: </td>
                                             <td align="left" >
                                                    <input data-validate-presence="true" data-validate-error="#validation2" type="text" name="txtApellidos" id="txtApellidos" 
                                                        class="input-xlarge" >
                                            </td>
                                            <td align="left">
                                                <div class="error" id="validation2">Campo requerido.</div>
                                            </td>   
                                </tr>
                                <tr>
                                    <td align="left">
                                        Mail: 
                                    </td>
                                    <td align="left" >
                                        <input type="text" name="txtMail" id="txtMail" 
                                                    class="input-xlarge" data-valdiate-presence="true" data-validate-email="true" 
                                                    data-validate-error="#email" data-validate-failed="true">
                                    </td>
                                    <td align="left">
                                        <div class="error email-error" id="email">Escribe un mail válido.</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left" >
                                        Compañia: 
                                    </td>
                                    <td align="left" >
                                        <input id="txtCompany" name="txtCompany" class="input-xlarge" type="text" value="" size="25" />
                                    </td>
                                    <td></td>
                                </tr>
                                <tr>   
                                     <td align="left">
                                        Dirección: 
                                     </td>
                                     <td align="left" >
                                        <input id="txtDireccion" name="txtDireccion" class="input-xlarge" type="text"  data-validate-presence="true" data-validate-error="#validationdir" />
                                    </td>
                                    <td align="left">
                                            <div class="error" id="validationdir">Campo requerido.</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left">
                                        Teléfono: 
                                    </td>
                                    <td align="left" >
                                        <input id="txtTelefono" name="txtTelefono" class="input-xlarge" type="text" data-validate-presence="true" data-validate-error="#validationtel" />
                                    </td>
                                     <td align="left">
                                       <div class="error" id="validationtel">Campo requerido.</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left">
                                        Ciudad:
                                    </td>
                                    <td align="left" >
                                          <input id="txtCiudad" name="txtCiudad" class="input-xlarge" type="text" data-validate-presence="true" data-validate-error="#validationcd" />
                                    </td>
                                     <td align="left">
                                       <div class="error" id="validationcd">Campo requerido.</div>
                                    </td>
                                </tr>
                                <tr>
                                     <td align="left">
                                         País: 
                                     </td>
                                     <td align="left" >
                                         <select name="ddlPais" id="ddlPais" style="width:250px" data-validate-selected="2,*" data-validate-error=".country-error" >
                                          </select>
                                     </td>
                                     <td>
                                        <div class="error country-error selected-error">Selecciona un país.</div>
                                     </td>
                                </tr>
                                <tr>
                                    <td align="left" valign="top" >
                                        ¿Como te enteraste de nosotros? 
                                    </td>
                                    <td align="left" >
                                        <select name="ddlHow" id="ddlHow" style="width:250px" data-validate-selected="2,*" data-validate-error=".how-error" >
                                                <option value="0">[Selecciona una opción]</option>
                                                <option value="1">Facebook</option>
                                                <option value="2">Twitter</option>
                                                <option value="3">Google</option>
                                                <option value="4">Yahoo</option>
                                                <option value="5">Radio</option>
                                                <option value="6">3dTotal</option>
                                                <option value="7">DeathFall</option>
                                                <option value="8">Portal de Internet</option>
                                                <option value="9">Conferencia</option>
                                                <option value="10">Otra</option>
                                            </select>
                                          <input type="text" value="" id="txtOtra" size="25" />
                                    </td>
                                    <td>
                                        <div class="error how-error selected-error">Selecciona una opción.</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left" valign="top" >
                                        ¿En que curso estás interesado? 
                                    </td>
                                    <td align="left" >
                                          <select name="ddlCursos" id="ddlCursos" style="width:400px" 
                                          data-validate-selected="2,*" data-validate-error=".course-error" >
                                          </select>
                                    </td>
                                    <td>
                                        <div class="error course-error selected-error">Selecciona un curso.</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td align="left" valign="top"><br />
                                        <input type="checkbox" name="membership[feature]" value="brochure" 
                                        data-validate-checked="1,*" data-validate-error=".feature-error" data-validate-failed="true" id="chkTerminos">
                                            <a href="http://cgpreceptor.com/terminos.html" target="_blank">Términos y Condiciones</a> 
                                        <br />
                                        <div class="error feature-error checked-error" style="display: none;">Debes aceptar los términos y condiciones.</div>
                                    </td>
                                    <td valign="top" rowspan="2" align="center">
                                         <br />
                                        <a href="#pago" id="registro" data-validate="#form"><img width="280px" height="100px" src="imagenes/boton_datos.png" /></a><br /><br />
                                        Al enviar tus datos podras apartar/comprar tu curso.
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div style="vertical-align:middle;"><br />
                                            <img alt="ayuda" width="24px" height="24px" src="images/info.png" />¿Tienes pregunta o dudas? Estamos para ayudarte <a href="mailto:info@cgpreceptor.com">info@cgpreceptor.com</a>
                                        </div>
                                    </td>
                                </tr>
                                   </table>
		                        </td>
	                            <td>
		                            <img src="imagenes/registro_06.png" width="1" height="542" alt="">
                                </td>
                            </tr>
                        </table>
                 </div>
                   <div class="slideOption1" id="slideOption1" style="display: none;">
                        <table id="tabla_decide" border="0" cellpadding="0" cellspacing="0">
	                        <tr>
		                        <td>
			                        <img src="imagenes/reserva_03.png" width="977" height="208" alt="" /></td>
	                        </tr>
	                        <tr>
		                        <td align="center" style="background-image:url(imagenes/reserva_05.png);width:977;height:110;">
                                  <div id="divComprar">

                                    </div>
		                        </td>
	                        </tr>
	                        <tr>
		                        <td>
			                        <img src="imagenes/reserva_07.png" width="977" height="123" alt="" /></td>
	                        </tr>
	                        <tr>
		                        <td>
			                        <img src="imagenes/reserva_08.png" width="977" height="150" alt="" /></td>
	                        </tr>
	                        <tr>
		                        <td>
			                        <img src="imagenes/reserva_09.png" width="977" height="142" alt="" /></td>
	                        </tr>
                        </table>              
                </div>
                   <div class="slideFormaPago" id="slideFormaPago" style="display:none;">
                    <table id="Tabla_01" border="0" cellpadding="0" cellspacing="0">
	                    <tr>
		                    <td colspan="3">
			                    <img src="imagenes/registroysuscrip_03.png" width="977" height="208" alt=""></td>
	                    </tr>
	                    <tr>
		                    <td>
			                    <img src="imagenes/registroysuscrip_05.png" width="332" height="79" alt=""></td>
		                         <td valign="middle" align="left" style="background-image:url(imagenes/registroysuscrip_06.png);width:326px;height:79px;">
                                        <select name="ddlFormaPago" id="ddlFormaPago" style="width:200px">
                                            <option value="1">Paypal</option>
                                            <option value="2">Depósito en Efectivo</option>
                                            <option value="3">Wire Transfer</option>
                                            <option value="4">Western Union</option>
                                            </select>&nbsp;&nbsp;&nbsp;&nbsp;
                                </td>
		                        <td valign="middle" align="left" style="background-image:url(imagenes/registroysuscrip_07.png);width:319px;height:79px;">
                                    <a href="#pago" id="lnkConfirmar" class="button orange" style="display:none;">Confirmar Orden</a>
                                    <a href="#pago" id="lnkPaypal" class="button orange" style="display:none;">Pasar a pagar</a>
                                </td>
	                    </tr>
	                    <tr>
		                    <td colspan="3">
			                    <img src="imagenes/registroysuscrip_08.png" width="977" height="155" alt=""></td>
	                    </tr>
	                    <tr>
		                    <td colspan="3">
			                    <img src="imagenes/registroysuscrip_09.png" width="977" height="150" alt=""></td>
	                    </tr>
	                    <tr>
		                    <td colspan="3">
			                    <img src="imagenes/registroysuscrip_10.png" width="977" height="142" alt=""></td>
	                    </tr>
                    </table>         
                </div>
                   <div class="slideGracias" id="slideGracias" style="display: none;">
                           <table id="tabla-gracias" border="0" cellpadding="0" cellspacing="0">
	                    <tr>
		                    <td>
			                    <img src="imagenes/gracias_03.png" width="977" height="208" alt="" /></td>
	                    </tr>
	                    <tr>
		                    <td>
			                    <img src="imagenes/gracias_05.png" width="977" height="110" alt="" /></td>
	                    </tr>
	                    <tr>
		                    <td>
			                    <img src="imagenes/gracias_07.png" width="977" height="123" alt="" /></td>
	                    </tr>
	                    <tr>
		                    <td>
			                    <img src="imagenes/gracias_08.png" width="977" height="71" alt="" /></td>
	                    </tr>
	                    <tr>
		                    <td>
			                    <img src="imagenes/gracias_09.png" width="977" height="79" alt=""/></td>
	                    </tr>
	                    <tr>
		                    <td>
			                    <img src="imagenes/gracias_10.png" width="977" height="142" alt=""/></td>
	                    </tr>
                    </table>
                     </div>
                </td>
            </tr>
        </table>
        <input type="hidden" id="tiporegistro" />
        <input type="hidden" id="idRegistro" />
     </div>
</body>
</html>
