<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">

<head>
    <meta charset="ISO-8859-1">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    <title> Prototipo </title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="robots" content="index,follow" />
    <link rel="shortcut icon" href="images/favicon.ico" />

    <!--[if (gte IE 6)&(lte IE 8)]>
<script type="text/javascript" src="js/html5.js"></script>
<script type="text/javascript" src="js/selectivizr-min.js"></script>
<link rel="stylesheet" href="css/ie_7.css" type="text/css" />
<![endif]-->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.16.custom.min.js"></script>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&libraries=places">
</script>
<script src="js/lavalamp.js" type="text/javascript"></script>

<!-- Add fancyBox main JS and CSS files -->
	<script type="text/javascript" src="js/jquery.fancybox.js?v=2.1.5"></script>
	<link rel="stylesheet" type="text/css" href="styles/jquery.fancybox.css?v=2.1.5" media="screen" />

<link type="text/css" rel="stylesheet" media="all" href="styles/styles.css" />
  
<style type="text/css">
    .map_canvas { height: 99%; width: 100%; position:relative; }
    
        #tw-form{
        font-family: Tahoma, Geneva, sans-serif;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        border: #aaa 1px solid;
        background: #DDDDDD;
        background: -moz-linear-gradient(top, #C4C4C4 0%, #EAEAEA 0%, #D3D3D3 100%); /* firefox */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#C4C4C4), color-stop(0%,#EAEAEA), color-stop(100%,#D3D3D3)); /* webkit */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#C4C4C4', endColorstr='#D3D3D3',GradientType=0 ); /* ie */
        width: 175px;
        float: left;
        padding: 0 4px;
        border-top-left-radius: 4px 4px;
        border-top-right-radius: 4px 4px;
        border-bottom-right-radius: 4px 4px;
        border-bottom-left-radius: 4px 4px;
        }
        #tw-form #tw-input-text{
        width: 145px;
        float: left;
        border: 0;
        background: #DDDDDD;
        background: -moz-linear-gradient(top, #C4C4C4 0%, #EAEAEA 0%, #D3D3D3 100%); /* firefox */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#C4C4C4), color-stop(0%,#EAEAEA), color-stop(100%,#D3D3D3)); /* webkit */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#C4C4C4', endColorstr='#D3D3D3',GradientType=0 ); /* ie */
        color: #777;
        line-height: 100%;
        font-size: 12px;
        font-family: Tahoma, Geneva, sans-serif;
        margin-top:0px;margin-bottom:0px;
        height:20px;
        }
        #tw-form #tw-input-text:focus{
        outline:none;
        color:#333;
        }
        #tw-form #tw-input-submit{
        background: url(search-zoom-icon.png) no-repeat 8px 5px;
        border: 0;
        float: left;
        width: 22px;
        z-index: 100;
        cursor: pointer;
        }

</style>

 <script type="text/javascript">

     $(document).ready(function () {

         var geocoder;
         var map;
         var infoWindow = new google.maps.InfoWindow;

         var latlng = new google.maps.LatLng(21.879341, -102.287032);

         var myOptions = {
             zoom: 12,
             center: latlng,
             mapTypeId: google.maps.MapTypeId.ROADMAP
         };

         map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

         //getMarkersWS(map);

         function getMarkersWS(map) {

             $.ajax({
                 type: "POST",
                 url: "datos.asmx/ObtienePuntosGuardados",
                 contentType: "application/json; charset=utf-8",
                 data: "{'tipoDemo':'obras'}",
                 dataType: "json",
                 success: function (response) {
                     var puntos = response.d;

                     $.each(puntos, function (index, p) {

                         var point = new google.maps.LatLng(p.Latitud, p.Longitud);

                         var image = "";

                         image = 'images/' + p.Icono + ".png";
                         
                         var marker = new google.maps.Marker({
                             map: map,
                             position: point,
                             icon: image,
                             title: p.Estatus
                         });

                         var html = "<div class='infowin'><b>" + p.Titulo + "</b><br><i> " + p.Subtitulo + "</i><hr>";
                         html = html + "Descripción: " + p.Descripcion + "<br />";
                         html = html + "Característica: " + p.Caracteristica + "<br /></div>";

                         //binds the infoWindow to the point
                         bindInfoWindow(marker, map, infoWindow, html, image);

                     });

                 },

                 failure: function (msg) {
                     alert(msg);
                 }

             }); //fin llamada ajax
         } //fin funcion getMarkersWS


         function bindInfoWindow(marker, map, infoWindow, html, icon) {
             google.maps.event.addListener(marker, 'mouseover', function () {
                 infoWindow.setContent(html);
                 infoWindow.open(map, marker);
                 marker.setIcon(icon);
             });
             google.maps.event.addListener(marker, 'mouseout', function () {
                 infoWindow.close();
                 marker.setIcon(icon);
             });
         }

         $("#li-nosotros").click(function () {
             $.fancybox.open({
                 href: 'blog.html',
                 type: 'iframe',
                 padding: 5
             });
         });

         $("#li-contacto").click(function () {
             $.fancybox.open({
                 href: 'contact.html',
                 type: 'iframe',
                 padding: 5
             });
         });

     });
</script>
</head>
<body>
		
            <div class="lavalampMap">
                <div class="lavalamp orange">
                    <ul >
                        <li class="active"><a href="">Nosotros</a></li>
                        <li><a id="li-nosotros" href="javascript:;">Popup</a></li>
                        <li><a href="">Opcion2</a></li>
                        <li><a href="">Opcion3</a></li>
                        <li><a href="">Opcion4</a></li>
                        <li><a id="li-contacto" href="javascript:;">Contacto</a></li>
                    </ul>
                    <div style="position:relative; float:right; padding-right:20px;" >
                        <div id="tw-form">
                            <input id="tw-input-text" type="text" name="query" value="search" />
                            <input id="tw-input-submit" type="submit" value="" />
                        </div>
                    </div>
                        <div class="floatr"></div>
                </div>
                <br />
                 <div class="lavalampIn orange">
                    <div id="map_canvas" class="map_canvas"></div>
                </div>
            </div>
</body>
</html>
